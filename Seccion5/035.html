<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Clase 35</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  </head>
  <body>
    <p>Clase 35 - Desplegar el tama√±o de los archivos a descargar</p>

    <a class="fetchSize"href="000.html">Archivo 000.html</a>
    <a class="fetchSize"href="035.html">Archivo 0.35.html</a>
    <a class="fetchSize"href="img/Facebook_AD.png">Imagen</a>


  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>



  <script type="text/javascript">

  $('a.fetchSize').each(function(){
    var link = this;

    $.ajax({
      type: 'HEAD',
      url: link.href,
      complete: function(xhr){
        var size = xhr.getResponseHeader('Content-Length');
        size = humanizar(size);

        //appennd a los links
        $(link).append(`(${size})`);
      }
    });
  });

  function humanizar( size ){

    	var unidades = ['bytes','KB','MB','GB','TB'];

    	var ord = Math.floor( Math.log(size) / Math.log(1024) );
    	ord = Math.min( Math.max(0,ord), unidades.length -1 );

    	var s = Math.round(  (size/Math.pow(1024,ord)) * 100 ) / 100;
    	return s + ' ' + unidades[ord]

  }

  </script>
  </body>
</html>
